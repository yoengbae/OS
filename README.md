# OS
20191 OS study

### 1. mutex

뮤텍스 사용 여부에 따른 실행 결과 차이를 보여주는 프로그램. 2개의 스레드에서 하나의 전역변수에 접근하게 되는데, main.c를 컴파일하여 실행해보면 간혹 Concurrency issue가 발생하는 것을 확인할 수 있다. main2.c는 mutex를 사용하여 이를 해결하는 예제이다.

### 2. linux kernel module

강의 중 사용한 코드를 일부 수정하여 제출한 과제.
응용 프로그램에서 문자를 입력받아 대소문자를 변환하여 저장하는 디바이스 드라이버이다. 최대 100개의 문자를 저장하고 그 이상의 입력에 대해서는 처음부터 덮어씌운다.

커널 모듈은 리눅스 커널이 동작중인 상태에서 동적으로 추가하거나 제거할 수 있다.
Make 로 컴파일한 커널 모듈을 insmod로 커널에 삽입한다.

```
#Make
#insmod mydrv.ko 
```

적재된 모듈은 lsmod로 확인할 수 있다. 이후 컴파일한 유저 프로그램을 실행하여 결과를 볼 수 있다.
file_operations 구조체를 통해 드라이버의 함수에 접근할 수 있다. 예제 응용 프로그램에서는 read(), write() 함수를 통해 드라이버에 데이터를 저장하거나 불러온다.

모듈의 제거는 rmmod로 할 수 있다.

```
#rmmod mydrv.ko
```


